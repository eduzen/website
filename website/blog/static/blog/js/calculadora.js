function calcular(){var a=$("#sueldoBruto").val(),b=$("input[name='conyuge']:checked").val(),c=$("input[name='jubilado']:checked").val(),d=$("input[name='patagonico']:checked").val(),e=$("#alquiler").val(),f=12*e*.4>TOPE_ALQUILER?TOPE_ALQUILER:12*e*.4,g=$("#hipotecario").val(),h=12*g>TOPE_HIPOTECARIO?TOPE_HIPOTECARIO:12*g,i=document.getElementById("hijos"),j=i.options[i.selectedIndex].value,k=0==c?.17*a>TOPE_APORTES?a-TOPE_APORTES:.83*a:.06*a>TOPE_APORTES?a-TOPE_APORTES:.94*a,l=13*k,m=(MINIMO_NO_IMPONIBLE+ADICIONAL_4TA_CATEGORIA)*(1.22*d+(1-d));mniTotal=(m+CONYUGE*b+HIJO*j+f+h)*(1-c)+c*(TOPE_JUBILADO+f+h),montoImponibleAplicable=0,mniTotal<l&&(montoImponibleAplicable=l-mniTotal);for(var n=[0,0,0,0,0,0,0,0,0],o=0;o<n.length&&(n[o]=calcularValorEscala(o,montoImponibleAplicable),n[o]==fijosEscalas[o]);o++);for(var p=o,q=0,o=0;o<n.length;o++)q+=n[o];q=q.toFixed(2),$("#impuestoAnual").text("$"+q);var r=(q/13).toFixed(2);$("#impuestoMensual").text("$"+r);var s=r/a*100;$("#alicuota").text(s.toFixed(2)+"%");var t=0==s?0:100*porcentajesEscalas[p];$("#alicuotaMarginal").text(t.toFixed(2)+"%");var u=k-r;$("#sueldoEnMano").text("$"+Math.round(u)+".00")}function calcularValorEscala(a,b){var c=0,d=0;return a>0&&(d=topesEscalas[a-1]),c=b<topesEscalas[a]?(b-d)*porcentajesEscalas[a]:fijosEscalas[a]}$(document).ready(function(){$("#calcular").on("click",function(){calcular()}),$(document).keypress(function(a){13==a.keyCode&&(a.preventDefault(),calcular())}),$("input[name='jubilado']").click(function(){$("input[name='conyuge']").attr({disabled:1==$(this).val()}),$("input[name='patagonico']").attr({disabled:1==$(this).val()})})});var topesEscalas=[2e4,4e4,6e4,8e4,12e4,16e4,24e4,32e4,99999999],porcentajesEscalas=[.05,.09,.12,.15,.19,.23,.27,.31,.35],fijosEscalas=[1e3,1800,2400,3e3,7600,9200,21600,24800],MINIMO_NO_IMPONIBLE=51967,ADICIONAL_4TA_CATEGORIA=249441.6,CONYUGE=48447,HIJO=24432,TOPE_APORTES=10896.32,TOPE_JUBILADO=407592,TOPE_ALQUILER=51967,TOPE_HIPOTECARIO=2e4;
